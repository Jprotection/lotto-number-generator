<!DOCTYPE html>
<html layout:decorate="~{layouts/layout}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>λ΅λ μƒμ„±κΈ°</title>
    <link rel="stylesheet" th:href="@{/css/lotto.css}">
    <link rel="stylesheet" th:href="@{/css/winning-lotto.css}">
    <link rel="stylesheet" th:href="@{/css/lotto-generator.css}">
</head>
<body>
    <section layout:fragment="content">
        <div class="lotto">
            <div th:if="${latestLotto}">
                <h1 th:text="|${latestLotto.drawDate} ${latestLotto.drawNumber}νμ°¨ κ²°κ³Ό|"></h1>
                <div class="lotto__balls">
                    <!-- μΌλ° λ²νΈ 6κ° -->
                    <div class="lotto__ball _1" th:text="${latestLotto.firstNumber}"></div>
                    <div class="lotto__ball _2" th:text="${latestLotto.secondNumber}"></div>
                    <div class="lotto__ball _3" th:text="${latestLotto.thirdNumber}"></div>
                    <div class="lotto__ball _4" th:text="${latestLotto.fourthNumber}"></div>
                    <div class="lotto__ball _5" th:text="${latestLotto.fifthNumber}"></div>
                    <div class="lotto__ball _6" th:text="${latestLotto.sixthNumber}"></div>
                    <p class="plus"> + </p>
                    <!-- λ³΄λ„μ¤ λ²νΈ -->
                    <div class="lotto__ball _bonus" th:text="${latestLotto.bonusNumber}"></div>
                </div>
            </div>

            <h1 class="winning__lotto__title" th:text="${message} ?: 'μµμ‹  νμ°¨μ λ‹Ήμ²¨μ'"></h1>

            <div class="winning__lotto__container" th:if="${winningLotto}">
                <h2 class="winning__prize__title">π‰ 1λ“± λ‹Ήμ²¨ π‰</h2>
                <div class="lotto__box" th:each="lotto : ${winningLotto.firstPrizes}" th:object="${lotto}">
                    <span class="winning__username" th:text="(*{member?.username} ?: 'WhoAmI') + 'λ‹'"></span>
                    <div class="winning__lotto lotto__balls">
                        <div class="winning__lotto lotto__ball _1" th:text="*{firstNumber}"></div>
                        <div class="winning__lotto lotto__ball _2" th:text="*{secondNumber}"></div>
                        <div class="winning__lotto lotto__ball _3" th:text="*{thirdNumber}"></div>
                        <div class="winning__lotto lotto__ball _4" th:text="*{fourthNumber}"></div>
                        <div class="winning__lotto lotto__ball _5" th:text="*{fifthNumber}"></div>
                        <div class="winning__lotto lotto__ball _6" th:text="*{sixthNumber}"></div>
                    </div>
                </div>
            </div>
            <div class="winning__lotto__container" th:if="${winningLotto}">
                <h2 class="winning__prize__title">π‰ 2λ“± λ‹Ήμ²¨ π‰</h2>
                <div class="lotto__box" th:each="lotto : ${winningLotto.secondPrizes}" th:object="${lotto}">
                    <span class="winning__username" th:text="(*{member?.username} ?: 'WhoAmI') + 'λ‹'"></span>
                    <div class="winning__lotto lotto__balls">
                        <div class="winning__lotto lotto__ball _1" th:text="*{firstNumber}"></div>
                        <div class="winning__lotto lotto__ball _2" th:text="*{secondNumber}"></div>
                        <div class="winning__lotto lotto__ball _3" th:text="*{thirdNumber}"></div>
                        <div class="winning__lotto lotto__ball _4" th:text="*{fourthNumber}"></div>
                        <div class="winning__lotto lotto__ball _5" th:text="*{fifthNumber}"></div>
                        <div class="winning__lotto lotto__ball _6" th:text="*{sixthNumber}"></div>
                    </div>
                </div>
            </div>
            <div class="winning__lotto__container" th:if="${winningLotto}">
                <h2 class="winning__prize__title">π‰ 3λ“± λ‹Ήμ²¨ π‰</h2>
                <div class="lotto__box" th:each="lotto : ${winningLotto.thirdPrizes}" th:object="${lotto}">
                    <span class="winning__username" th:text="(*{member?.username} ?: 'WhoAmI') + 'λ‹'"></span>
                    <div class="winning__lotto lotto__balls">
                        <div class="winning__lotto lotto__ball _1" th:text="*{firstNumber}"></div>
                        <div class="winning__lotto lotto__ball _2" th:text="*{secondNumber}"></div>
                        <div class="winning__lotto lotto__ball _3" th:text="*{thirdNumber}"></div>
                        <div class="winning__lotto lotto__ball _4" th:text="*{fourthNumber}"></div>
                        <div class="winning__lotto lotto__ball _5" th:text="*{fifthNumber}"></div>
                        <div class="winning__lotto lotto__ball _6" th:text="*{sixthNumber}"></div>
                    </div>
                </div>
            </div>
            <div class="winning__lotto__container" th:if="${winningLotto}">
                <h2 class="winning__prize__title">π‰ 4λ“± λ‹Ήμ²¨ π‰</h2>
                <div class="lotto__box" th:each="lotto : ${winningLotto.fourthPrizes}" th:object="${lotto}">
                    <span class="winning__username" th:text="(*{member?.username} ?: 'WhoAmI') + 'λ‹'"></span>
                    <div class="winning__lotto lotto__balls">
                        <div class="winning__lotto lotto__ball _1" th:text="*{firstNumber}"></div>
                        <div class="winning__lotto lotto__ball _2" th:text="*{secondNumber}"></div>
                        <div class="winning__lotto lotto__ball _3" th:text="*{thirdNumber}"></div>
                        <div class="winning__lotto lotto__ball _4" th:text="*{fourthNumber}"></div>
                        <div class="winning__lotto lotto__ball _5" th:text="*{fifthNumber}"></div>
                        <div class="winning__lotto lotto__ball _6" th:text="*{sixthNumber}"></div>
                    </div>
                </div>
            </div>
            <div class="winning__lotto__container" th:if="${winningLotto}">
                <h2 class="winning__prize__title">π‰ 5λ“± λ‹Ήμ²¨ π‰</h2>
                <div class="lotto__box" th:each="lotto : ${winningLotto.fifthPrizes}" th:object="${lotto}">
                    <span class="winning__username" th:text="(*{member?.username} ?: 'WhoAmI') + 'λ‹'"></span>
                    <div class="winning__lotto lotto__balls">
                        <div class="winning__lotto lotto__ball _1" th:text="*{firstNumber}"></div>
                        <div class="winning__lotto lotto__ball _2" th:text="*{secondNumber}"></div>
                        <div class="winning__lotto lotto__ball _3" th:text="*{thirdNumber}"></div>
                        <div class="winning__lotto lotto__ball _4" th:text="*{fourthNumber}"></div>
                        <div class="winning__lotto lotto__ball _5" th:text="*{fifthNumber}"></div>
                        <div class="winning__lotto lotto__ball _6" th:text="*{sixthNumber}"></div>
                    </div>
                </div>
            </div>

            <div class="lotto__generator">
                <div class="lotto__generator__title">μ΅°ν•© μƒμ„±κΈ°</div>
                <form th:action="@{/lotto}" method="post">
                    <fieldset>
                        <legend>ν¬ν•¨ν•  λ²νΈ (μµλ€ 5κ°)</legend>
                        <div class="include__set">
                            <div>
                                <label for="firstIncludeNumber">ν¬ν•¨ν•  λ²νΈ</label>
                                <select id="firstIncludeNumber" name="firstIncludeNumber" class="include-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="secondIncludeNumber">ν¬ν•¨ν•  λ²νΈ</label>
                                <select id="secondIncludeNumber" name="secondIncludeNumber" class="include-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="thirdIncludeNumber">ν¬ν•¨ν•  λ²νΈ</label>
                                <select id="thirdIncludeNumber" name="thirdIncludeNumber" class="include-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="fourthIncludeNumber">ν¬ν•¨ν•  λ²νΈ</label>
                                <select id="fourthIncludeNumber" name="fourthIncludeNumber" class="include-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="fifthIncludeNumber">ν¬ν•¨ν•  λ²νΈ</label>
                                <select id="fifthIncludeNumber" name="fifthIncludeNumber" class="include-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>μ μ™Έν•  λ²νΈ (μµλ€ 10κ°)</legend>
                        <div class="exclude__set">
                            <div>
                                <label for="firstExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="firstExcludeNumber" name="firstExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="secondExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="secondExcludeNumber" name="secondExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="thirdExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="thirdExcludeNumber" name="thirdExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="fourthExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="fourthExcludeNumber" name="fourthExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="fifthExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="fifthExcludeNumber" name="fifthExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="sixthExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="sixthExcludeNumber" name="sixthExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="seventhExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="seventhExcludeNumber" name="seventhExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="eighthExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="eighthExcludeNumber" name="eighthExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="ninthExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="ninthExcludeNumber" name="ninthExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="tenthExcludeNumber">μ μ™Έν•  λ²νΈ</label>
                                <select id="tenthExcludeNumber" name="tenthExcludeNumber" class="exclude-number">
                                    <option value="">μ„ νƒ μ•ν•¨</option>
                                    <option th:each="i : ${#numbers.sequence(1, 45)}"
                                            th:value="${i}"
                                            th:text="${i}">
                                    </option>
                                </select>
                            </div>
                        </div>
                    </fieldset>

                    <div class="count__field">
                        <label for="count">μƒμ„±ν•  λ΅λ μ΅°ν•© μ</label>
                        <select id="count" name="count">
                            <option th:each="i : ${#numbers.sequence(2, 10)}"
                                    th:value="${i}"
                                    th:text="${i}">
                            </option>
                        </select>
                    </div>

                    <button type="submit">λ΅λ μ΅°ν•© μƒμ„±</button>
                </form>
            </div>
        </div>

        <script>
            function updateExcludeOptions() {
                const includeSelects = document.querySelectorAll('.include-number');
                const excludeSelects = document.querySelectorAll('.exclude-number');

                // ν¬ν•¨λ κ°’λ“¤ μμ§‘ (μ„ νƒλ κ°’λ§)
                const includedValues = Array.from(includeSelects)
                    .map(select => select.value)
                    .filter(val => val !== ""); // λΉ κ°’μ€ μ μ™Έ

                excludeSelects.forEach(select => {
                    const currentValue = select.value;

                    // λ¨λ“  μµμ… μ΄κΈ°ν™”
                    Array.from(select.options).forEach(option => {
                        option.disabled = false; // μΌλ‹¨ λ¨λ‘ ν™μ„±ν™”
                        if (includedValues.includes(option.value) && option.value !== "") {
                            option.disabled = true; // ν¬ν•¨λ λ²νΈλ” λΉ„ν™μ„±ν™”
                        }
                    });

                    // μ„ νƒλ κ°’μ΄ λΉ„ν™μ„±ν™”λλ©΄ μ΄κΈ°ν™”
                    if (includedValues.includes(currentValue)) {
                        select.value = "";
                    }
                });
            }

            // λ¨λ“  ν¬ν•¨ selectμ— μ΄λ²¤νΈ λ¦¬μ¤λ„ μ¶”κ°€
            document.querySelectorAll('.include-number').forEach(select => {
                select.addEventListener('change', updateExcludeOptions);
            });
        </script>
    </section>
</body>
</html>
